{% extends 'base.html' %}
{% block content %}
<div class="page-toolbar">
  <h2>Edit Pallet {{pallet.pallet_code}}</h2>
  <a class="action-btn secondary" href="/production/pallet/{{pallet.id}}">Back to Pallet</a>
</div>

<form method="post" action="/production/pallet/{{pallet.id}}/edit" class="panel-form">
  <table>
    <tr>
      <th>Component ID</th>
      <th>Expected Qty</th>
      <th>External Qty Needed</th>
      <th>Qty Scrap</th>
      {% for station_name in station_names %}
      <th>{{station_name}}</th>
      {% endfor %}
    </tr>
    {% for row in part_rows %}
    <tr>
      <td>
        <input type="text" name="component_id" value="{{row.component_id or ''}}" />
      </td>
      <td><input type="number" step="0.01" min="0" name="expected_qty" value="{{row.expected_qty}}" /></td>
      <td><input type="number" step="0.01" min="0" name="external_qty_needed" value="{{row.external_qty_needed or 0}}" /></td>
      <td><input type="number" step="0.01" min="0" name="scrap_qty" value="{{row.scrap_qty}}" /></td>
      {% for station_name in station_names %}
      <td>{% if row.station_flags[station_name] %}âœ“{% else %}-{% endif %}</td>
      {% endfor %}
    </tr>
    {% endfor %}
    <tr>
      <td><input type="text" name="component_id" value="" placeholder="add component" /></td>
      <td><input type="number" step="0.01" min="0" name="expected_qty" value="0" /></td>
      <td><input type="number" step="0.01" min="0" name="external_qty_needed" value="0" /></td>
      <td><input type="number" step="0.01" min="0" name="scrap_qty" value="0" /></td>
      {% for station_name in station_names %}
      <td>-</td>
      {% endfor %}
    </tr>
  </table>
  <div class="action-row">
    <button type="submit">Save component list</button>
  </div>
</form>
{% endblock %}
